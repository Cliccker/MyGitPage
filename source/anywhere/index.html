<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>咖啡品鉴交互指南</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Visualization & Content Choices:
        - Bean Varieties (Major & Arabica): Clickable cards display details. Bar chart (Chart.js) for comparing attributes like production share or caffeine. Goal: Compare & Inform. Justification: Interactive exploration of rich data.
        - Roasting: Buttons for roast levels update text, a visual bean color representation (CSS), and a Radar chart (Chart.js) for flavor profiles (acidity, sweetness, bitterness, body). Goal: Show differences. Justification: Multi-modal comparison.
        - Acidity: Definition with interactive keyword hovers. Clickable list of acids shows flavor contributions. Interactive diagram for influencing factors. Goal: Educate & Clarify. Justification: Layered information access.
        - Processing Methods: Clickable tabs/cards for main methods update details and a comparative Bar chart (Chart.js) for flavor/acidity/body. Accordions for other methods. Goal: Compare & Detail. Justification: Structured presentation of complex info.
        - Body: Interactive selector for body types (Light, Medium, Full) updates descriptors. Interactive diagram for influencing factors. Goal: Explain & Visualize. Justification: Tangible representation of abstract concept.
        - Tasting/Cupping: Interactive step-by-step guide. Goal: Guide. Justification: Clear procedural learning.
        - All tables from the source report are transformed into these interactive elements or used as data sources for charts.
        - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            background-color: #ffffff;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            padding: 1rem;
        }
        .nav-button {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            transition: background-color 0.3s, color 0.3s;
            cursor: pointer;
        }
        .nav-button.active {
            background-color: #d97706; /* amber-600 */
            color: white;
        }
        .nav-button:not(.active):hover {
            background-color: #f59e0b; /* amber-500 */
            color: white;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .interactive-card {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);
            cursor: pointer;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .interactive-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05);
        }
        .interactive-card.selected {
            outline: 2px solid #d97706; /* amber-600 */
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05);
        }
        .tab-button {
            padding: 0.5rem 1rem;
            border-radius: 0.375rem; /* rounded-md */
            border: 1px solid #e5e7eb; /* gray-200 */
            background-color: #f9fafb; /* gray-50 */
            color: #374151; /* gray-700 */
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s;
        }
        .tab-button.active {
            background-color: #d97706; /* amber-600 */
            color: white;
            border-color: #d97706; /* amber-600 */
        }
        .tab-button:not(.active):hover {
            background-color: #fde68a; /* amber-200 */
        }
        /* Tooltip for acidity keywords */
        .tooltip {
            position: relative;
            display: inline-block;
            border-bottom: 1px dotted #d97706; /* amber-600 */
            cursor: help;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 160px;
            background-color: #374151; /* gray-700 */
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px 0;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -80px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #374151 transparent transparent transparent;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
         /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #d97706; /* amber-600 */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #b45309; /* amber-700 */
        }
    </style>
</head>
<body class="bg-stone-100 text-stone-800 min-h-screen flex flex-col">

    <header class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <h1 class="text-3xl font-bold text-amber-700 text-center">咖啡品鉴交互指南</h1>
            <nav class="mt-4">
                <ul class="flex flex-wrap justify-center gap-2 md:gap-4">
                    <li><button class="nav-button active" data-target="home">首页</button></li>
                    <li><button class="nav-button" data-target="beans">咖啡豆</button></li>
                    <li><button class="nav-button" data-target="roasting">烘焙艺术</button></li>
                    <li><button class="nav-button" data-target="acidity">解密酸度</button></li>
                    <li><button class="nav-button" data-target="processing">处理魔法</button></li>
                    <li><button class="nav-button" data-target="body">醇厚度</button></li>
                    <li><button class="nav-button" data-target="tasting">品鉴之道</button></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-grow">
        <section id="home" class="content-section active space-y-6">
            <div class="bg-white p-6 rounded-xl shadow-lg">
                <h2 class="text-2xl font-semibold text-amber-700 mb-4">欢迎来到咖啡的奇妙世界！</h2>
                <p class="text-lg leading-relaxed">咖啡，这一深邃而迷人的饮品，早已超越了简单的提神醒脑功能，演变为一种遍布全球的文化现象和生活方式的象征。从街角的咖啡馆到精致的单一产地手冲吧，咖啡以其千变万化的风味和独特的地域烙印，吸引着无数爱好者投入其中。</p>
                <p class="mt-4 text-lg leading-relaxed">品鉴咖啡，不仅仅是味蕾的享受，更是一场调动所有感官的探索之旅。它关乎对咖啡豆背后故事的理解，对烘焙师匠心独运的致敬，以及对冲煮者精湛技艺的欣赏。通过品鉴，我们得以打开一扇通往广阔风味世界的大门，体验从花香、果酸到坚果、巧克力等纷繁复杂的层次，感受不同产地、品种、处理方式和烘焙程度所赋予咖啡的独特灵魂。</p>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-lg">
                <h3 class="text-xl font-semibold text-amber-700 mb-3">本指南将带您探索：</h3>
                <ul class="list-disc list-inside space-y-2 text-stone-700">
                    <li>咖啡豆的奇妙世界：阿拉比卡、罗布斯塔、利比里卡及其明星亚种。</li>
                    <li>烘焙的艺术：浅、中、深度烘焙如何点亮咖啡豆的灵魂。</li>
                    <li>解密咖啡之酸：理解“酸味”作为正面风味指标的真正含义。</li>
                    <li>处理法之魔法：水洗、日晒、蜜处理等如何塑造风味基调。</li>
                    <li>咖啡的醇厚度：探索口感的重量与质感。</li>
                    <li>品鉴之道与风味语言：掌握品鉴步骤与技巧。</li>
                </ul>
                <p class="mt-4 text-lg leading-relaxed">准备好启程，一同探索咖啡的奥秘，提升您的品鉴能力，更深刻地享受每一次品饮带来的愉悦吧！</p>
            </div>
        </section>

        <section id="beans" class="content-section space-y-6">
            <div class="bg-white p-6 rounded-xl shadow-lg">
                <h2 class="text-2xl font-semibold text-amber-700 mb-4">咖啡豆的奇妙世界</h2>
                <p class="text-lg leading-relaxed mb-6">咖啡的风味之旅始于咖啡豆本身。不同的咖啡树种及其下的诸多亚种，是构成咖啡万千风味的第一块基石。了解它们各自的特性，是品鉴咖啡的入门必修课。</p>

                <div class="mb-8">
                    <h3 class="text-xl font-semibold text-amber-600 mb-3">主要咖啡品种</h3>
                    <p class="mb-4 text-stone-700">全球商业种植的咖啡豆主要可分为三大品种：阿拉比卡（Arabica）、罗布斯塔（Robusta）和利比里卡（Liberica）。它们在风味、咖啡因含量、种植条件乃至市场定位上都有着显著的差异。</p>
                    <div class="grid md:grid-cols-3 gap-6 mb-6" id="majorVarietiesContainer">
                        </div>
                    <div id="majorVarietyDetail" class="mt-6 p-4 bg-stone-50 rounded-lg shadow">
                        <p class="text-center text-stone-500">点击上方的卡片查看品种详情。</p>
                    </div>
                    <div class="chart-container mt-6 h-72 md:h-96 max-h-[400px] mx-auto max-w-2xl">
                        <canvas id="majorVarietiesChart"></canvas>
                    </div>
                </div>

                <div>
                    <h3 class="text-xl font-semibold text-amber-600 mb-3">阿拉比卡家族的明星：探索热门亚种</h3>
                    <p class="mb-4 text-stone-700">精品咖啡的世界几乎完全围绕着阿拉比卡品种展开。在其漫长的演化、自然突变、人工杂交和选育历程中，诞生了众多风味各异、特性鲜明的亚种。了解这些明星亚种的特点，能帮助我们更精准地定位自己喜爱的风味。</p>
                    <div class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-6" id="arabicaSubVarietiesContainer">
                        </div>
                    <div id="arabicaSubVarietyDetail" class="mt-6 p-4 bg-stone-50 rounded-lg shadow">
                         <p class="text-center text-stone-500">点击上方的阿拉比卡亚种卡片查看详情。</p>
                    </div>
                </div>
                 <div class="mt-8 bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-xl font-semibold text-amber-600 mb-3">如何根据喜好选择咖啡豆？</h3>
                    <p class="mb-2 text-stone-700"><strong>基于主要品种的选择：</strong></p>
                    <ul class="list-disc list-inside space-y-1 text-stone-600 mb-4">
                        <li>喜爱口感柔和、香气馥郁、风味层次丰富：选 <strong>阿拉比卡</strong>。</li>
                        <li>偏爱口感强烈、醇厚浓郁、高咖啡因：选 <strong>罗布斯塔</strong>。</li>
                        <li>追求独特、烟熏风味、花香甜感：尝试 <strong>利比里卡</strong>。</li>
                    </ul>
                    <p class="mb-2 text-stone-700"><strong>在阿拉比卡内部进行选择：</strong></p>
                    <ul class="list-disc list-inside space-y-1 text-stone-600 mb-4">
                        <li>钟情明亮果酸、优雅花香：关注埃塞俄比亚古优原生种、肯尼亚SL系列、高海拔瑰夏。</li>
                        <li>偏好风味均衡、甜感突出、经典巧克力/坚果风味：尝试巴西波旁、卡杜艾、蒙多诺沃，或哥伦比亚阿拉比卡。</li>
                    </ul>
                     <p class="text-stone-700"><strong>考虑烘焙程度：</strong>浅烘更能展现产地风味和酸甜感，深烘则带来浓郁醇厚度和焦糖化风味，但会削弱产地特性。</p>
                </div>
            </div>
        </section>

        <section id="roasting" class="content-section space-y-6">
            <div class="bg-white p-6 rounded-xl shadow-lg">
                <h2 class="text-2xl font-semibold text-amber-700 mb-4">烘焙的艺术——点亮咖啡豆的灵魂</h2>
                <p class="text-lg leading-relaxed mb-6">如果说咖啡豆是乐谱，那么烘焙师就是指挥家。咖啡烘焙是一个复杂而关键的过程，它不仅赋予咖啡豆我们所熟悉的棕色色泽和诱人香气，更深刻地决定了最终饮品呈现出的酸度、甜度、苦度、醇厚度以及整体风味特征。</p>

                <div class="mb-6 flex flex-wrap justify-center gap-3">
                    <button class="tab-button active" data-roast="light">浅度烘焙</button>
                    <button class="tab-button" data-roast="medium">中度烘焙</button>
                    <button class="tab-button" data-roast="dark">深度烘焙</button>
                </div>

                <div class="grid md:grid-cols-2 gap-6 items-start">
                    <div id="roastInfoContainer" class="space-y-4">
                        </div>
                    <div class="space-y-6">
                        <div id="roastBeanVisualContainer" class="text-center p-4 bg-stone-50 rounded-lg">
                            <p class="text-lg font-medium text-stone-700 mb-2">咖啡豆外观模拟</p>
                            <div id="roastBeanColor" class="w-32 h-32 mx-auto rounded-full border-4 border-stone-300 transition-colors duration-500" title="模拟咖啡豆颜色"></div>
                            <p id="roastBeanOil" class="mt-2 text-sm text-stone-600"></p>
                        </div>
                        <div class="chart-container h-72 md:h-96 max-h-[450px]">
                            <canvas id="roastProfileChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="mt-8">
                    <h3 class="text-xl font-semibold text-amber-600 mb-3">烘焙过程中的物理变化</h3>
                    <ul class="list-disc list-inside space-y-1 text-stone-700">
                        <li><strong>颜色：</strong>从生豆的蓝绿色/灰绿色，逐渐变为浅黄、肉桂色（浅烘）、棕色（中烘），再到深褐、黑褐色（深烘）。</li>
                        <li><strong>水分：</strong>生豆含水率约8-12%，烘焙首先是脱水过程。</li>
                        <li><strong>重量：</strong>因水分蒸发和有机物分解，重量减轻12-25%。</li>
                        <li><strong>体积：</strong>内部气体膨胀，体积增大，可达两倍。</li>
                        <li><strong>油脂：</strong>深烘时，内部油脂被逼出到豆表，豆表油亮。</li>
                        <li><strong>爆裂：</strong>一爆（约196-205°C，浅烘标志），二爆（约224-234°C，深烘标志）。</li>
                    </ul>
                </div>
                 <div class="mt-8">
                    <h3 class="text-xl font-semibold text-amber-600 mb-3">烘焙如何影响风味：核心化学反应</h3>
                    <ul class="list-disc list-inside space-y-2 text-stone-700">
                        <li><strong>美拉德反应 (Maillard Reaction):</strong> 糖类与氨基酸在约140-170°C反应，产生烘烤香、坚果香、麦芽香等多种风味，并使豆子变棕。</li>
                        <li><strong>焦糖化反应 (Caramelization):</strong> 糖分在约170°C以上热裂解，形成焦糖风味（甜、苦、酸交织），颜色加深。</li>
                        <li><strong>有机酸的降解与转化:</strong> 生豆中的绿原酸、柠檬酸、苹果酸等在烘焙中降解或转化，直接影响酸度特性。浅中烘保留更多果酸，深烘则酸度大减。</li>
                    </ul>
                    <p class="mt-2 text-stone-700">烘焙师通过控制“烘焙曲线”（升温速率和总时长）来调控这些反应，塑造最终风味。浅烘凸显原始风味，深烘创造烘焙赋予的浓郁风味。</p>
                </div>
            </div>
        </section>

        <section id="acidity" class="content-section space-y-6">
            <div class="bg-white p-6 rounded-xl shadow-lg">
                <h2 class="text-2xl font-semibold text-amber-700 mb-4">解密咖啡之酸——风味的灵魂</h2>
                <p class="text-lg leading-relaxed mb-4">在咖啡品鉴中，“酸味”并非指pH值的酸碱度，而是一种在口腔中体验到的
                    <span class="tooltip">明亮<span class="tooltiptext">像阳光一样清晰、振奋的感觉。</span></span>、
                    <span class="tooltip">活泼<span class="tooltiptext">富有生气和跳跃感。</span></span>、
                    <span class="tooltip">清爽<span class="tooltiptext">干净、不拖沓，令人精神一振。</span></span>
                    的感觉。它是构成咖啡风味魅力的核心元素之一，是衡量咖啡品质和复杂度的重要正面指标。
                </p>
                <p class="text-stone-700 mb-6">优质的酸质如同乐曲中的高音，能提亮整体风味，赋予咖啡层次感和活力。描述正面酸度常用词：明亮 (bright)、活泼 (lively)、柑橘般 (citrusy)、莓果般 (berry-like)。负面则可能指：平淡 (flat)、过酸/酸涩 (sour)。</p>

                <div class="mb-8">
                    <h3 class="text-xl font-semibold text-amber-600 mb-3">咖啡中的主要酸性物质及其风味贡献</h3>
                    <div class="space-y-3" id="acidsContainer">
                        </div>
                </div>

                <div>
                    <h3 class="text-xl font-semibold text-amber-600 mb-3">影响咖啡酸度的因素</h3>
                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4" id="acidityFactorsContainer">
                        </div>
                    <p class="mt-4 text-stone-700">理解这些因素，有助于我们根据口味偏好选择咖啡豆和调整冲煮。喜爱明亮酸质者可选高海拔水洗阿拉比卡浅烘豆。酸度本身无好坏，关键在于平衡与适宜性。</p>
                </div>
            </div>
        </section>

        <section id="processing" class="content-section space-y-6">
            <div class="bg-white p-6 rounded-xl shadow-lg">
                <h2 class="text-2xl font-semibold text-amber-700 mb-4">处理法之魔法——塑造咖啡风味的关键</h2>
                <p class="text-lg leading-relaxed mb-6">咖啡果实从鲜红的樱桃状变为绿色生豆，必须经历处理法。这个过程去除果皮果肉，并干燥咖啡豆。不同的处理方法，对咖啡豆的风味、酸度、甜度、醇厚度产生深远独特的塑造作用。</p>

                <div class="mb-6 flex flex-wrap justify-center gap-3" id="processingTabs">
                    <button class="tab-button active" data-processing="washed">水洗法</button>
                    <button class="tab-button" data-processing="natural">日晒法</button>
                    <button class="tab-button" data-processing="honey">蜜处理法</button>
                    <button class="tab-button" data-processing="wet-hulled">湿刨法</button>
                    <button class="tab-button" data-processing="anaerobic">其他特色</button>
                </div>

                <div id="processingInfoContainer" class="p-4 bg-stone-50 rounded-lg shadow min-h-[200px]">
                    </div>

                <div class="chart-container mt-6 h-72 md:h-96 max-h-[400px] mx-auto max-w-2xl">
                    <canvas id="processingComparisonChart"></canvas>
                </div>
                 <p class="mt-6 text-stone-700">理解不同处理法对风味的影响，是品鉴之旅中不可或缺的一环。它解释了为何同样产区、甚至同庄园的咖啡豆，会因处理方式不同而呈现千差万别的风味面貌。</p>
            </div>
        </section>

        <section id="body" class="content-section space-y-6">
            <div class="bg-white p-6 rounded-xl shadow-lg">
                <h2 class="text-2xl font-semibold text-amber-700 mb-4">咖啡的醇厚度——口感的重量与质感</h2>
                <p class="text-lg leading-relaxed mb-4">品尝咖啡时，口腔中感受到的“重量感”和“质感”即为醇厚度 (Body) 或口感 (Mouthfeel)。醇厚度指咖啡液体的重量感、粘稠度，由不溶性物质（细微颗粒、蛋白质）和油脂决定。</p>
                <p class="text-stone-700 mb-6">口感是更广义的概念，包含顺滑度、涩感、油润感等所有触觉感受。</p>

                <div class="mb-8">
                    <h3 class="text-xl font-semibold text-amber-600 mb-3">描述醇厚度与口感的词汇</h3>
                    <div class="grid md:grid-cols-2 gap-4 text-stone-700">
                        <div>
                            <p class="font-medium">醇厚度强度：</p>
                            <ul class="list-disc list-inside ml-4">
                                <li><strong>轻盈/轻淡 (Light-bodied / Thin):</strong> 如茶水般稀薄清爽。</li>
                                <li><strong>中等 (Medium-bodied):</strong> 圆润顺滑，有存在感不过于沉重。</li>
                                <li><strong>饱满/厚重 (Full-bodied / Heavy):</strong> 浓郁粘稠，有明显重量感。</li>
                            </ul>
                        </div>
                        <div>
                            <p class="font-medium">口感质感：</p>
                            <ul class="list-disc list-inside ml-4">
                                <li><strong>顺滑 (Smooth / Silky / Creamy):</strong> 如丝绸或奶油般。</li>
                                <li><strong>油润 (Buttery / Oily):</strong> 黄油般的滑腻感。</li>
                                <li><strong>清爽/爽脆 (Crisp / Juicy):</strong> 干净利落，有活力。</li>
                                <li><strong>涩感 (Astringent / Dry):</strong> 收敛、干燥感（通常负面）。</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div>
                    <h3 class="text-xl font-semibold text-amber-600 mb-3">影响醇厚度的主要因素</h3>
                     <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4" id="bodyFactorsContainer">
                        </div>
                    <p class="mt-4 text-stone-700">理解这些因素，能助我们欣赏醇厚度差异，并根据喜好选择和调整冲煮。</p>
                </div>
            </div>
        </section>

        <section id="tasting" class="content-section space-y-6">
            <div class="bg-white p-6 rounded-xl shadow-lg">
                <h2 class="text-2xl font-semibold text-amber-700 mb-4">咖啡品鉴之道——开启感官盛宴</h2>
                <p class="text-lg leading-relaxed mb-6">咖啡品鉴，或称杯测 (Cupping)，是一套系统性的感官评估方法，旨在客观地分析和描述咖啡的风味特征。它不仅是专业人士的必备技能，也是爱好者提升品饮乐趣、探索个人风味偏好的重要途径。</p>

                <h3 class="text-xl font-semibold text-amber-600 mb-3">咖啡品鉴 (杯测) 的基本步骤</h3>
                <div id="cuppingStepsContainer" class="space-y-3">
                    </div>
                <p class="mt-6 text-stone-700">专业的杯测有严格规范，家庭品鉴可借鉴其核心步骤和原理，逐步提升品鉴能力。在不同温度阶段（热、温、凉）评估风味、余韵、酸度、醇厚度等是关键。</p>
            </div>
        </section>
    </main>

    <footer class="bg-stone-800 text-stone-300 text-center py-6 mt-auto">
        <p>&copy; 2024 咖啡品鉴交互指南。灵感源自提供的咖啡品鉴报告。</p>
    </footer>

    <script>
        // Data extracted from the provided markdown document
        const coffeeData = {
            majorVarieties: [
                {
                    name: "阿拉比卡 (Arabica)",
                    details: "全球产量约69-70%。风味卓越，香气浓郁，味道均衡，酸度愉悦，带花香、果香、坚果等复杂风味。咖啡因含量较低(0.8-1.7%)。豆型长椭圆/扁平，S形裂纹。喜高海拔(900-2000m)，种植较娇贵，成本高。主要用于精品咖啡。",
                    production: 70, caffeineMin: 0.8, caffeineMax: 1.7,
                    flavorProfile: "香气浓郁, 味道均衡, 酸度愉悦",
                    notes: "花香, 果香, 坚果"
                },
                {
                    name: "罗布斯塔 (Robusta)",
                    details: "全球产量约30%。风味浓烈，苦味重，香气较弱，酸度不足，常有泥土、木质、黑巧克力风味。咖啡因含量高(1.7-4.7%)。豆型椭圆/圆形，直线裂纹。适应性强，耐高温高湿，低海拔(0-700m)生长，成本低。主要用于速溶、罐装、拼配咖啡。",
                    production: 30, caffeineMin: 1.7, caffeineMax: 4.7,
                    flavorProfile: "风味浓烈, 苦味重",
                    notes: "泥土, 木质, 黑巧克力"
                },
                {
                    name: "利比里卡 (Liberica)",
                    details: "全球产量约1-2%。风味独特浓烈，烟熏、木质、黑巧克力，伴有花香和果香甜味。咖啡因含量较低(约1.2%)。豆型大而不规则。适应性强，低海拔生长。主要产区马来西亚。用于精品咖啡，特色风味。",
                    production: 2, caffeineMin: 1.2, caffeineMax: 1.2,
                    flavorProfile: "独特浓烈, 烟熏感",
                    notes: "木质, 黑巧克力, 花香, 果香甜味"
                }
            ],
            arabicaSubVarieties: [
                { name: "铁皮卡 (Typica)", details: "古老品种，风味纯净干净，明亮柠檬酸质，优雅甜感余韵。植株高大，产量不高，较脆弱。著名代表：牙买加蓝山、苏门答腊曼特宁、夏威夷可纳。" },
                { name: "波旁 (Bourbon)", details: "与铁皮卡并称两大始祖。品质优良，红酒般酸质，悠长甜感余韵。产量略高于铁皮卡。SL28、SL34为其后代选育品种。" },
                { name: "瑰夏/艺伎 (Geisha/Gesha)", details: "精品咖啡皇后。极独特优雅香气：茉莉花、佛手柑、花香，伴有柑橘、芒果等复杂果酸。口感顺滑干净。产量稀少，价格昂贵。" },
                { name: "帕卡玛拉 (Pacamara)", details: "帕卡斯与马拉戈日皮的杂交种。豆粒大。风味复杂，花香、香料、多样水果调性，酸度明亮，醇厚度佳。萨尔瓦多代表品种。" },
                { name: "SL28", details: "肯尼亚代表。浓郁果汁感，黑加仑风味，明亮柠檬酸质，甜感出色，平衡复杂。抗旱性。" },
                { name: "SL34", details: "肯尼亚代表。复杂柑橘类酸质，浓郁厚实口感。抗大雨能力强。" },
                { name: "卡杜拉 (Caturra)", details: "波旁自然变异种，植株矮小，可密植。柠檬或柑橘般酸质，甜度受施肥影响。" },
                { name: "卡杜艾 (Catuai)", details: "蒙多诺沃与卡杜拉杂交种。矮小株型，抗风。风味均衡，酸度较高，甜度良好。" },
                { name: "蒙多诺沃 (Mundo Novo)", details: "铁皮卡与红波旁自然杂交。植株高大强健，产量高，风味丰富平衡（榛果、巧克力、水果）。对病害较敏感。" }
            ],
            roastLevels: {
                light: {
                    name: "浅度烘焙 (Light Roast)",
                    color: "#D2B48C", // Tan
                    oil: "豆表干燥，通常无明显油脂",
                    details: "常见名称：肉桂烘焙、新英格兰烘焙。最大程度保留产地风味和品种特性。花香、果香、柑橘类香气突出。酸度高且明亮活泼。甜感可能较低，但优质豆有天然甜感。苦味非常低。醇厚度轻盈或适中，口感清新如茶。",
                    acidity: 5, sweetness: 2, bitterness: 1, body: 2, aroma: 5
                },
                medium: {
                    name: "中度烘焙 (Medium Roast)",
                    color: "#A0522D", // Sienna
                    oil: "豆表可能依然干燥，或开始出现少量油光",
                    details: "常见名称：美式烘焙、城市烘焙。产地风味仍可辨识，融入更多烘焙风味如焦糖、巧克力、坚果。香气饱满。酸度降低，更柔和平衡。甜感明显。苦味略增，但不主导。醇厚度适中，圆润饱满。",
                    acidity: 3, sweetness: 4, bitterness: 3, body: 3, aroma: 4
                },
                dark: {
                    name: "深度烘焙 (Dark Roast)",
                    color: "#5E2605", // Dark Brown, almost black
                    oil: "豆表油光锃亮，油脂析出明显",
                    details: "常见名称：法式烘焙、意式烘焙。产地风味很大程度被烘焙风味掩盖。烟熏、焦香、苦巧克力、香料味主导。酸度大幅降低甚至消失。甜感降低，可能焦苦。苦味非常显著。醇厚度高，浓郁厚重。",
                    acidity: 1, sweetness: 1, bitterness: 5, body: 5, aroma: 2
                }
            },
            acids: [
                { name: "绿原酸类 (CGAs)", details: "生豆中含量最丰富。本身苦涩。烘焙中降解为奎宁酸和咖啡酸，影响苦味、涩感和醇厚度。" },
                { name: "柠檬酸 (Citric Acid)", details: "贡献明亮、活泼的柑橘类果酸（柠檬、橙子）。高海拔阿拉比卡常见，浅中烘焙保留多。" },
                { name: "苹果酸 (Malic Acid)", details: "带来柔和、清脆的果酸（青苹果、梨）。肯尼亚咖啡常见，浅烘焙中更明显。" },
                { name: "奎宁酸 (Quinic Acid)", details: "绿原酸热解产物。适量时提供干净尾韵，过量则导致酸涩苦味。深烘、不新鲜咖啡中含量高。" },
                { name: "乙酸/醋酸 (Acetic Acid)", details: "微量时带来洁净感、水果醋般甜酸。过量则刺激性醋酸味（发酵或烘焙缺陷）。" },
                { name: "乳酸 (Lactic Acid)", details: "特定发酵（如厌氧）产生。带来柔和酸质，提升顺滑口感和醇厚度。" },
                { name: "磷酸 (Phosphoric Acid)", details: "无机酸。增强水果风味，带来“明亮感”、“活力感”、“起泡感”。部分非洲咖啡（如肯尼亚SL28）明显，可能与富磷土壤有关。" }
            ],
            acidityFactors: [
                { name: "品种与产地", icon: "🌍", details: "阿拉比卡通常酸度更愉悦。不同亚种、产区（土壤、气候）赋予独特酸质。例：肯尼亚咖啡常有莓果酸，哥伦比亚则温和柑橘酸。" },
                { name: "海拔高度", icon: "⛰️", details: "高海拔阿拉比卡通常酸度品质更高、风味更复杂。成熟周期长，积累更多糖分和有机酸。" },
                { name: "处理法", icon: "💧☀️🍯", details: "水洗法：干净明亮酸度。日晒法：酸度柔和圆润，被甜感平衡。蜜处理法：介于两者之间，酸度比水洗柔和，比日晒明显。" },
                { name: "烘焙程度", icon: "🔥", details: "烘焙越深，酸度越低。浅烘保留最多有机酸，酸度最高。深烘时酸类大量降解，酸味大减。" },
                { name: "冲煮方式", icon: "☕", details: "水温、研磨粗细、萃取时间等影响酸度感知。低温萃取可能酸质更突出。冷萃咖啡酸度远低于热冲。" }
            ],
            processingMethods: {
                washed: {
                    name: "水洗法 (Washed/Wet Process)",
                    steps: "去皮 -> 水中发酵 (12-48h)分解果胶 -> 清洗 -> 干燥至含水率10-12%。",
                    characteristics: "风味纯净、干净，清晰展现品种和风土特性。常有花香、柑橘等细腻风味。酸度明亮、活泼、清晰。醇厚度适中，偏清爽。品质稳定。",
                    acidity: 5, body: 2, sweetness: 3
                },
                natural: {
                    name: "日晒法 (Natural/Dry Process)",
                    steps: "完整咖啡果实直接日晒干燥 (2-4周) -> 脱壳。",
                    characteristics: "风味浓郁复杂，甜感高，充满发酵水果香（莓果、热带水果、酒香）。酸度较低沉、圆润，或被甜感平衡。醇厚度较高，饱满。品质控制较难。",
                    acidity: 2, body: 4, sweetness: 5
                },
                honey: {
                    name: "蜜处理法 (Honey Process)",
                    steps: "去外果皮，保留部分或全部果胶层 -> 日晒干燥。",
                    characteristics: "甜感非常突出，明显水果风味（红糖、焦糖、成熟水果、蜂蜜）。酸度比水洗柔和，比日晒略明显。醇厚度中等至饱满。细分为黄/红/黑蜜，黑蜜风味最浓郁。",
                    acidity: 3, body: 3, sweetness: 4
                },
                 "wet-hulled": {
                    name: "湿刨法 (Wet-Hulled / Giling Basah)",
                    steps: "印尼苏门答腊特色。去皮、短暂发酵/不发酵 -> 咖啡豆含水率仍高(30-50%)时刨去湿润羊皮纸 -> 后续干燥。",
                    characteristics: "醇厚度极高，浓郁厚重。酸度极低甚至无。风味独特：泥土、药草、雪松、香料、皮革、烟草等深沉气息。",
                    acidity: 1, body: 5, sweetness: 2
                },
                anaerobic: { // Combined "Other Specialty" for simplicity in tabs
                    name: "其他特色处理法",
                    steps: "厌氧发酵：无氧环境发酵。二氧化碳浸渍法：借鉴葡萄酒酿造，完整果实在CO2中发酵。",
                    characteristics: "极具实验性，产生独特、强烈、复杂风味。厌氧：浓郁热带水果、酒香、发酵香。CO2浸渍：红酒、威士忌、香蕉、泡泡糖等非传统风味。",
                    acidity: 4, body: 3, sweetness: 4 // Representing general specialty trend
                }
            },
            bodyFactors: [
                { name: "咖啡豆品种与产地", icon: "🌰", details: "罗布斯塔通常比阿拉比卡醇厚度高。特定产区（如印尼苏门答腊湿刨豆）醇厚度极高。" },
                { name: "处理方法", icon: "⚙️", details: "日晒法、蜜处理法（尤其黑蜜）、湿刨法通常醇厚度较高。水洗法醇厚度相对较低，口感清爽。" },
                { name: "烘焙程度", icon: "🔥", details: "浅烘醇厚度较轻盈。中烘趋于平衡饱满。深烘因油脂释出和可溶性大分子增加，醇厚度非常饱满厚重。" },
                { name: "冲煮方法与参数", icon: "🛠️", details: "研磨细、水粉比低、金属滤网（法压壶、意式）醇厚度高。滤纸（手冲、滴滤）则醇厚度较低，口感干净。" }
            ],
            cuppingSteps: [
                { name: "1. 准备工作", details: "器具：杯测碗、匙、热水壶、研磨机、秤、计时器、吐杯、记录工具。咖啡豆：浅中烘，烘焙后8-24h，注水前15min内研磨。水：洁净过滤水，水温约93°C。水粉比：SCAA标准8.25g粉:150ml水。" },
                { name: "2. 闻干香 (Fragrance)", details: "注水前，闻研磨好的咖啡粉香气。记录强度和特征（花香、果香、坚果等）。" },
                { name: "3. 注水与闻湿香 (Aroma / Wet Crust)", details: "热水均匀注入，浸湿所有粉，形成粉渣层。静置3-5分钟（SCAA标准4分钟）。破渣前闻湿香。" },
                { name: "4. 破渣与再闻香", details: "浸泡时间到后，用匙背轻推粉渣层3次破渣。同时靠近杯口深吸香气。" },
                { name: "5. 捞渣 (Skimming)", details: "破渣后，用两把匙将表面粉渣和泡沫捞除干净。" },
                { name: "6. 品尝与评估 (Tasting)", details: "咖啡液降温至约70°C开始品尝。啜吸入口，使咖啡液雾化覆盖口腔。评估：风味、余韵、酸度、醇厚度、一致性、干净度、甜度等。在不同温度（热、温、凉）下品尝。" }
            ]
        };

        let majorVarietiesChartInstance = null;
        let roastProfileChartInstance = null;
        let processingComparisonChartInstance = null;

        document.addEventListener('DOMContentLoaded', function() {
            const navButtons = document.querySelectorAll('.nav-button');
            const contentSections = document.querySelectorAll('.content-section');

            navButtons.forEach(button => {
                button.addEventListener('click', () => {
                    navButtons.forEach(btn => btn.classList.remove('active'));
                    contentSections.forEach(section => section.classList.remove('active'));

                    button.classList.add('active');
                    document.getElementById(button.dataset.target).classList.add('active');
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            });

            populateMajorVarieties();
            populateArabicaSubVarieties();
            setupRoastingInteraction();
            populateAcids();
            populateAcidityFactors();
            setupProcessingInteraction();
            populateBodyFactors();
            populateCuppingSteps();

            // Initial chart displays
            updateMajorVarietiesChart(coffeeData.majorVarieties[0]); // Default to Arabica
            updateRoastProfileChart(coffeeData.roastLevels.light); // Default to light roast
            updateProcessingComparisonChart(coffeeData.processingMethods.washed); // Default to washed
        });

        function populateMajorVarieties() {
            const container = document.getElementById('majorVarietiesContainer');
            const detailView = document.getElementById('majorVarietyDetail');
            container.innerHTML = ''; 
            coffeeData.majorVarieties.forEach(variety => {
                const card = document.createElement('div');
                card.className = 'interactive-card';
                card.innerHTML = `<h4 class="text-lg font-semibold text-amber-600 mb-2">${variety.name}</h4><p class="text-sm text-stone-600">${variety.details.substring(0, 100)}...</p>`;
                card.addEventListener('click', () => {
                    document.querySelectorAll('#majorVarietiesContainer .interactive-card').forEach(c => c.classList.remove('selected'));
                    card.classList.add('selected');
                    detailView.innerHTML = `
                        <h4 class="text-lg font-semibold text-amber-700 mb-2">${variety.name}</h4>
                        <p class="text-stone-700 leading-relaxed">${variety.details}</p>
                        <p class="mt-2 text-sm text-stone-600"><strong>全球产量占比:</strong> ${variety.production}%</p>
                        <p class="text-sm text-stone-600"><strong>咖啡因含量:</strong> ${variety.caffeineMin}% - ${variety.caffeineMax}%</p>
                    `;
                    updateMajorVarietiesChart(variety);
                });
                container.appendChild(card);
            });
        }
        
        function populateArabicaSubVarieties() {
            const container = document.getElementById('arabicaSubVarietiesContainer');
            const detailView = document.getElementById('arabicaSubVarietyDetail');
            container.innerHTML = '';
            coffeeData.arabicaSubVarieties.forEach(subVariety => {
                const card = document.createElement('div');
                card.className = 'interactive-card';
                card.innerHTML = `<h4 class="text-md font-semibold text-amber-600 mb-1">${subVariety.name}</h4><p class="text-xs text-stone-600">${subVariety.details.substring(0,80)}...</p>`;
                card.addEventListener('click', () => {
                    document.querySelectorAll('#arabicaSubVarietiesContainer .interactive-card').forEach(c => c.classList.remove('selected'));
                    card.classList.add('selected');
                    detailView.innerHTML = `
                        <h4 class="text-lg font-semibold text-amber-700 mb-2">${subVariety.name}</h4>
                        <p class="text-stone-700 leading-relaxed">${subVariety.details}</p>
                    `;
                });
                container.appendChild(card);
            });
        }

        function updateMajorVarietiesChart(selectedVariety) {
            const ctx = document.getElementById('majorVarietiesChart').getContext('2d');
            const labels = coffeeData.majorVarieties.map(v => v.name);
            const productionData = coffeeData.majorVarieties.map(v => v.production);
            const caffeineDataMin = coffeeData.majorVarieties.map(v => v.caffeineMin);
            // const caffeineDataMax = coffeeData.majorVarieties.map(v => v.caffeineMax); // Could use for ranged bar

            if (majorVarietiesChartInstance) {
                majorVarietiesChartInstance.destroy();
            }
            majorVarietiesChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: '全球产量占比 (%)',
                            data: productionData,
                            backgroundColor: labels.map(l => l === selectedVariety.name ? '#fbbf24' : '#fcd34d'), // amber-400 / amber-300
                            borderColor: labels.map(l => l === selectedVariety.name ? '#d97706' : '#f59e0b'), // amber-600 / amber-500
                            borderWidth: 1
                        },
                        {
                            label: '最低咖啡因含量 (%)',
                            data: caffeineDataMin,
                            backgroundColor: labels.map(l => l === selectedVariety.name ? '#a3e635' : '#bef264'), // lime-500 / lime-400
                            borderColor: labels.map(l => l === selectedVariety.name ? '#65a30d' : '#84cc16'), // lime-700 / lime-600
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: '百分比 (%)' }
                        }
                    },
                    plugins: {
                        title: { display: true, text: '主要咖啡品种特性对比' },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        label += context.parsed.y + '%';
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        }

        function setupRoastingInteraction() {
            const roastButtons = document.querySelectorAll('#roasting .tab-button');
            const infoContainer = document.getElementById('roastInfoContainer');
            const beanColorDiv = document.getElementById('roastBeanColor');
            const beanOilP = document.getElementById('roastBeanOil');

            function updateRoastDisplay(roastKey) {
                const roast = coffeeData.roastLevels[roastKey];
                infoContainer.innerHTML = `
                    <h4 class="text-xl font-semibold text-amber-700 mb-2">${roast.name}</h4>
                    <p class="text-stone-700 leading-relaxed">${roast.details}</p>
                `;
                beanColorDiv.style.backgroundColor = roast.color;
                beanOilP.textContent = roast.oil;
                updateRoastProfileChart(roast);
            }

            roastButtons.forEach(button => {
                button.addEventListener('click', () => {
                    roastButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    updateRoastDisplay(button.dataset.roast);
                });
            });
            updateRoastDisplay('light'); // Initial display
        }

        function updateRoastProfileChart(roast) {
            const ctx = document.getElementById('roastProfileChart').getContext('2d');
            if (roastProfileChartInstance) {
                roastProfileChartInstance.destroy();
            }
            roastProfileChartInstance = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['酸度', '甜度', '苦度', '醇厚度', '香气'],
                    datasets: [{
                        label: roast.name,
                        data: [roast.acidity, roast.sweetness, roast.bitterness, roast.body, roast.aroma],
                        fill: true,
                        backgroundColor: 'rgba(217, 119, 6, 0.2)', // amber-600 transparent
                        borderColor: '#d97706', // amber-600
                        pointBackgroundColor: '#d97706',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: '#d97706'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { display: true },
                            suggestedMin: 0,
                            suggestedMax: 5,
                            ticks: { stepSize: 1 }
                        }
                    },
                    plugins: {
                        title: { display: true, text: '烘焙风味特征雷达图' }
                    }
                }
            });
        }

        function populateAcids() {
            const container = document.getElementById('acidsContainer');
            container.innerHTML = '';
            coffeeData.acids.forEach(acid => {
                const div = document.createElement('div');
                div.className = 'p-3 bg-stone-50 rounded-lg shadow-sm';
                div.innerHTML = `
                    <h4 class="font-semibold text-amber-600">${acid.name}</h4>
                    <p class="text-sm text-stone-600">${acid.details}</p>
                `;
                container.appendChild(div);
            });
        }
        
        function populateAcidityFactors() {
            const container = document.getElementById('acidityFactorsContainer');
            container.innerHTML = '';
            coffeeData.acidityFactors.forEach(factor => {
                const card = document.createElement('div');
                card.className = 'interactive-card p-4 text-center';
                card.innerHTML = `
                    <span class="text-3xl mb-2 block">${factor.icon}</span>
                    <h4 class="text-md font-semibold text-amber-600 mb-1">${factor.name}</h4>
                    <p class="text-xs text-stone-600">${factor.details}</p>
                `;
                container.appendChild(card);
            });
        }

        function setupProcessingInteraction() {
            const processingTabs = document.querySelectorAll('#processingTabs .tab-button');
            const infoContainer = document.getElementById('processingInfoContainer');

            function updateProcessingDisplay(processingKey) {
                const method = coffeeData.processingMethods[processingKey];
                infoContainer.innerHTML = `
                    <h4 class="text-xl font-semibold text-amber-700 mb-2">${method.name}</h4>
                    <p class="text-sm text-stone-600 mb-1"><strong>步骤：</strong>${method.steps}</p>
                    <p class="text-sm text-stone-700"><strong>特点：</strong>${method.characteristics}</p>
                `;
                updateProcessingComparisonChart(method);
            }

            processingTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    processingTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    updateProcessingDisplay(tab.dataset.processing);
                });
            });
            updateProcessingDisplay('washed'); // Initial display
        }

        function updateProcessingComparisonChart(method) {
            const ctx = document.getElementById('processingComparisonChart').getContext('2d');
            if (processingComparisonChartInstance) {
                processingComparisonChartInstance.destroy();
            }
            processingComparisonChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['酸度', '醇厚度', '甜度'],
                    datasets: [{
                        label: method.name,
                        data: [method.acidity, method.body, method.sweetness],
                        backgroundColor: ['#FBBF24', '#F59E0B', '#D97706'], // amber-400, amber-500, amber-600
                        borderColor: ['#B45309', '#92400E', '#78350F'], // amber-700, amber-800, amber-900
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    scales: {
                        x: {
                            beginAtZero: true,
                            suggestedMax: 5,
                            title: { display: true, text: '相对强度 (1-5)' }
                        }
                    },
                    plugins: {
                        title: { display: true, text: `处理法特性对比: ${method.name}` },
                        legend: { display: false }
                    }
                }
            });
        }

        function populateBodyFactors() {
            const container = document.getElementById('bodyFactorsContainer');
            container.innerHTML = '';
            coffeeData.bodyFactors.forEach(factor => {
                const card = document.createElement('div');
                card.className = 'interactive-card p-4 text-center';
                card.innerHTML = `
                    <span class="text-3xl mb-2 block">${factor.icon}</span>
                    <h4 class="text-md font-semibold text-amber-600 mb-1">${factor.name}</h4>
                    <p class="text-xs text-stone-600">${factor.details}</p>
                `;
                container.appendChild(card);
            });
        }

        function populateCuppingSteps() {
            const container = document.getElementById('cuppingStepsContainer');
            container.innerHTML = '';
            coffeeData.cuppingSteps.forEach(step => {
                const div = document.createElement('div');
                // Using details/summary for accordion-like behavior
                div.innerHTML = `
                    <details class="p-3 bg-stone-50 rounded-lg shadow-sm group">
                        <summary class="font-semibold text-amber-600 cursor-pointer group-open:text-amber-700">${step.name}</summary>
                        <p class="text-sm text-stone-600 mt-2">${step.details}</p>
                    </details>
                `;
                container.appendChild(div);
            });
        }

    </script>
</body>
</html>
